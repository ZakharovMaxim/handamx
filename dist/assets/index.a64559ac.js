var Y=Object.defineProperty,H=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var k=(t,e,n)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E=(t,e)=>{for(var n in e||(e={}))X.call(e,n)&&k(t,n,e[n]);if(N)for(var n of N(e))q.call(e,n)&&k(t,n,e[n]);return t},A=(t,e)=>H(t,J(e));const G=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};G();const g=Symbol.for("attributes"),D=Symbol.for("isTemp"),I=Symbol.for("isCloned"),x={elementEffects:new WeakMap,removeElement(t){const e=x.elementEffects.get(t);e&&(Array.from(e).forEach(n=>et(n)),e.clear(),x.elementEffects.delete(t))},addElementEffect(t,e){const n=x.elementEffects.get(t)||new Set;x.elementEffects.has(t)||x.elementEffects.set(t,n),n.add(t,e)}};function z(t,e){let n="";const s=Array.isArray(t)?t:[t],r=`return ${e}`;for(let o=0;o<s.length;o++)n+=`with(contexts[${o}]) {
`,o===s.length-1&&(n+=`
        ${r}
        ${"}".repeat(t.length)}
      `);return new Function("$data","$el",`
    const contexts = Array.isArray($data) ? $data : [$data];
    ${n}
  `)}function K(t,e,n){try{return z(e,t)(e,n)}catch{return t}}function B(t){return t==="true"?!0:t==="false"?!1:typeof t!="string"?!!t:t}function C(t){return!!(t&&typeof t=="object")}function Q(t,e){const n=t.nodeValue?t.nodeValue.trim():"";let s=n;n.indexOf("{{")!==-1&&n.indexOf("}}")!==-1&&(s="`"+s.replace(/{{/g,"${").replace(/}}/g,"}")+"`",e(s))}function U(t,e){var n;for(const s of e)s.name.startsWith("mx-")&&((n=t.removeAttribute)==null||n.call(t,s.name)),t[g].push(s)}function Z(t){const e=t.split(":");let n=null,s=[];if(e[1]){const r=e[1].split(".");n=r[0],s=r.slice(1)}return[e[0],n,s]}function tt(t={}){return A(E({},t),{[D]:!0})}function b(t){return t.find(e=>!e[D])}function M(t){const e=c=>c.trim(),n=t.split(" in ").map(e),s=n[0],r=n[1],o=s.split(",").map(e);return{value:r,args:s,valueKey:o[0],iteratorKey:o[1]}}const $=new WeakMap;let h;function O(t){return h=t,h(),h=null,t}function et(t){!(t==null?void 0:t.deps)||(t.deps.forEach(e=>{e.delete(t)}),t.deps.clear())}function L(t,e){if(!h)return;let n=$.get(t);n||$.set(t,n=new Map);let s=n.get(e);s||n.set(e,s=new Set),s.add(h),h.deps||(h.deps=new Set),h.deps.add(s)}function nt(t,e,{oldValue:n,newValue:s}){var o;const r=(o=$.get(t))==null?void 0:o.get(e);!r||r.forEach(c=>c(s,n))}function st(t){return new Proxy(t,{get(e,n,s){let r=Reflect.get(e,n,s);return e.hasOwnProperty(n)&&L(e,n),r},set(e,n,s,r){if(e.hasOwnProperty(n)){const o=Reflect.get(e,n,r);Reflect.set(e,n,s,r),o!==s&&nt(e,n,{oldValue:o,newValue:s})}else Reflect.set(e,n,s,r);return!0}})}function rt(t,e,n){return O(()=>{t[e]=n.bind(t)()}),t[e]}const ot=(t,e)=>{for(const n in e){let s=e[n];if(C(e[n])&&(s=e[n].handler),!s)continue;const r=s.bind(t);h=r,L(t,n),h=null,C(e[n])&&e[n].immediate&&r(t[n])}},it=t=>t?new Array(t).fill(1).map((e,n)=>[n,n+1]):[],_={"mx-on":{preprocess(t,e,{contexts:n}){let s=e;return typeof b(n)[e]!="function"&&(e.startsWith("function")||e.indexOf("=>")!==-1?s=e:s=`function binded (...attrs) {${e}}`),s},bind(t,e,{event:n,contexts:s,modifiers:r}){const o=b(s);let c=typeof o[e]=="function"?o[e]:e;if(typeof c!="function")return;const f={};r.includes("capture")&&(f.capture=!0),r.includes("once")&&(f.once=!0),r.includes("passive")&&(f.passive=!0),c=c.bind(o);const a=["stop","prevent","self"].some(u=>r.includes(u))?function(i){r.includes("stop")&&i.stopPropagation(),r.includes("prevent")&&i.preventDefault(),!(r.includes("self")&&i.target!==t)&&c(i)}:c;t.addEventListener(n,a,f)}},"mx-text":{bind(t,e){e!==null&&(t.textContent=e)}},"mx-html":{bind(t,e){e!==null&&(t.innerHTML=e)}},"mx-show":{bind(t,e){t.style.display=e?"":"none"}},"mx-bind":{preprocess(t,e,{event:n}){let s=e;return n==="class"&&(s=`classnames(${e}`,t.getAttribute("class")&&(s+=`, ${t.getAttribute("class").split(" ").map(r=>`"${r}"`).join(", ")}`),s+=")"),s},bind(t,e,{event:n}){if(n==="style")Object.entries(e).forEach(([s,r])=>{t.style[s]=r});else if(n==="class")t.className=e;else{const s=B(e);n==="value"?(e=String(e),t.value=e):s===!1?t.removeAttribute(n):t.setAttribute(n,s)}}},"mx-if":{bind(t,e,{contexts:n}){const s=b(n);e?v(t,{contexts:n,globalContext:s.$global,isMount:!0}):w(t)}},"mx-for":{preprocess(t,e){return M(e).value},bind(t,e,{contexts:n,attr:s}){var u;const r=typeof e=="number"?it(e):Array.isArray(e)?e.map((i,d)=>[d,i]):e;if(!((u=t.internal)==null?void 0:u.comment)){const i=document.createComment("v-for");t.before(i),t.internal=A(E({},t.internal),{comment:i})}const o=b(n);let c=t.internal.comment,f=t.internal.comment.nextSibling;for(;(f==null?void 0:f[I])||f===t;){const{nextSibling:i}=f;w(f),f=i}const{valueKey:p,iteratorKey:a}=M(s.value);for(let i=0;i<r.length;i++){const d=t.cloneNode(!0),l=[...d.attributes];for(const y of l)d.removeAttribute(y.name);d[g]=t[g].filter(y=>y.name!=="mx-for"),c.after(d);const m=tt();console.log(p,a,r[i]),p&&(m[p]=r[i][1]),a&&(m[a]=r[i][0]),v(d,{contexts:[m,...n],globalContext:o.$global}),d[I]=!0,c=d}w(t)}},"mx-ref":{skipEvaluating:!0,bind(t,e,{contexts:n}){const s=b(n);s.$refs[e]||(s.$refs[e]=t)},unbind(t,e,{contexts:n}){const s=b(n);s.$refs[e]&&delete s.$refs[e]}}},S={};function ct(t){return{bind(e,n){const{attr:s,event:r,modifiers:o,contexts:c}=n;let f;if(t.bind){const p={contexts:c,attr:s,event:r,modifiers:o},a=t.preprocess?t.preprocess(e,s.value,p):s.value;if(t.skipEvaluating)f=t.bind(e,a,p);else{const u=O(()=>{const i=K(a,c,e);f=t.bind(e,i,p)});n.saveEffect&&x.addElementEffect(e,u)}}return f}}}Object.keys(_).forEach(t=>{S[t]=ct(_[t])});function ft(t,e){const n=["checkbox","radio"].includes(t.type),s=n?"checked":"value",r=n?"change":"input";return[{name:`mx-bind:${s}`,value:e.value},{name:`mx-on:${r}`,value:`function (ev) {${e.value} = ev.target.${s}}`}]}function w(t,e={}){if(x.removeElement(t),t.childNodes){let n=t.childNodes.length;for(;n--;)w(t.childNodes[n],{keepNode:!0})}e.keepNode||t.remove()}function v(t,e){var f,p;const n={"mx-for":1};let s=[...t[g]||t.attributes||[]];s=s.sort((a,u)=>{const i=n[a.name]||s.length,d=n[u.name]||s.length;return i-d}),t[g]||Object.defineProperty(t,g,{value:[]}),t.nodeType===Node.TEXT_NODE&&Q(t,a=>{const u={name:"mx-text",value:a};t.parentNode[g].push(u),s.push(u)}),t.nodeType!==Node.TEXT_NODE&&!t[g].length&&U(t,s);let{contexts:r}=e;for(let a of r)a.$global=e.globalContext;if(s==null?void 0:s.length){const a=s.find(l=>l.name==="mx-scope"),u=dt();if(a&&u[a.value]){const l=P(u[a.value]);l.$parent=b(r),r=[l,...r]}const i=s.find(l=>l.name==="mx-for");for(let l=0;l<s.length;l++){let m=s[l];const y=["mx-if","mx-scope"];if(!m.name.startsWith("mx")||y.includes(m.name))continue;if(m.name==="mx-model"){const[F,W]=ft(t,m);m=F,s.push(W)}const[T,V,j]=Z(m.name);if(((f=S[T])==null?void 0:f.bind)&&S[T].bind(t,{contexts:r,attr:m,modifiers:j,event:V,saveEffect:T!=="mx-for"}),i)break}const d=s.find(l=>l.name==="mx-if");if(d&&!e.isMount){const l=t.parentNode,m=t.nextSibling;O(()=>{K(d.value,r,t)?(l.insertBefore(t,m),v(t,A(E({},e),{contexts:r,isMount:!0}))):w(t,e)})}if(i)return}let o=t.childNodes,c=o.length;for(;c--;)v(o[c],{contexts:r,globalContext:e.globalContext});(p=t.removeAttribute)==null||p.call(t,"mx-cloak")}function at(){let t=[];for(let e=0;e<arguments.length;e++){const n=arguments[e];if(!!n)if(Array.isArray(n))t=t.concat(n);else if(typeof n=="object"){const s=Object.keys(n);for(let r=0;r<s.length;r++)n[s[r]]&&t.push(s[r])}else t.push(n)}return t}function lt(...t){return at(...t).join(" ").trim()}window.classnames=lt;function P(t){const e={state:typeof t.state=="function"?t.state():t.state||{},methods:t.methods||{},watch:t.watch||{},computed:t.computed||{}},n=st(e.state);for(let s in e.computed)rt(n,s,e.computed[s]);return Object.keys(e.methods).forEach(s=>{n[s]=e.methods[s].bind(n)}),Object.keys(e.watch).length&&ot(e.state,e.watch),n.$refs={},n}const ut={};function dt(){return ut}function mt(t,e){const n=P(e);return v(t,{contexts:[n],globalContext:n}),n}const R="todos";function pt(){const t=localStorage.getItem(R);if(t)try{const e=JSON.parse(t);if(Array.isArray(e))return e;throw new Error("Invalid storage value")}catch{return[]}return[]}mt(document.getElementById("app"),{state:{items:pt(),newTodoItemTitle:"",itemToDelete:null},watch:{items(){localStorage.setItem(R,JSON.stringify(this.items))}},methods:{add(){this.newTodoItemTitle&&(this.items=[{id:this.items.length,title:this.newTodoItemTitle,checked:!1},...this.items],this.newTodoItemTitle="")},setItemToDelete(t){this.itemToDelete=t},toggleCheckStatus(t){this.items=this.items.map(e=>e===t?A(E({},e),{checked:!e.checked}):e)},closePopup(){this.itemToDelete=null},confirmDelete(){!this.itemToDelete||(this.items=this.items.filter(t=>t!==this.itemToDelete),this.itemToDelete=null)}}});
